# LAGREGATOR [![Build Status](https://travis-ci.org/tscolari/lagregator.svg?branch=master)](https://travis-ci.org/tscolari/lagregator)

Easy way to merge `lagger.Logger`s outputs (https://github.com/cloudfoundry/lager)


### Relogger

It's a io.Writer that you can pass to another logger and have its log messages redirected to a destination logger:

```go
func ExecuteThat(logger lager.Logger) {
  desinationLogger := logger.Session("execute-that")
  cmd := exec.Command("command-that-outputs-lager-log-messages")
  cmd.Stdout = lagregator.NewRelogger(destinationLogger)
  cmd.Run()
}
```

All output from `command-that-outputs-lager-log-messages` that was generated by a lager.Logger will
be relogged to `destinationLogger` on the fly.


### RelogStream

It's relogs a given stream:

```go
func ExecuteThat(logger lager.Logger) {
  desinationLogger := logger.Session("execute-that")
  pipeW, pipeR, _ := os.Pipe()

  cmd := exec.Command("command-that-outputs-lager-log-messages")
  cmd.Stdout = pipeW
  cmd.Run()

  lagregator.RelogSream(destinationLogger, pipeR)
}
```

### RelogBytes

It's relogs a given bytes array:

```go
func ExecuteThat(logger lager.Logger) {
  desinationLogger := logger.Session("execute-that")
  cmd := exec.Command("command-that-outputs-lager-log-messages")
  output, _ := cmd.Output()

  lagregator.RelogBytes(destinationLogger, output)
}
```

